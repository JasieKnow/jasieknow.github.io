<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Jan Nowacki - Strona osobista</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Favicon z inicja≈Çami JN -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='20' fill='%23FFD700'/><text x='50' y='68' font-family='Arial, sans-serif' font-size='50' font-weight='bold' text-anchor='middle' fill='%234f5c2b'>JN</text></svg>">
  <style>
    :root {
      --primary-color: #6b7a3c;
      --secondary-color: #4f5c2b;
      --nav-color: #3e4a20;
      --card-color: #5a6933;
      --text-color: #f5f5f0;
      --accent-color: #ffd700;
      --shadow: rgba(0,0,0,0.3);
    }

    [data-theme="light"] {
      --primary-color: #e8f4f8;
      --secondary-color: #b8d4dc;
      --nav-color: #9bb9c2;
      --card-color: #d4e7ed;
      --text-color: #333333;
      --accent-color: #ff6b00;
      --shadow: rgba(0,0,0,0.1);
    }

    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background-color: var(--primary-color);
      color: var(--text-color);
      transition: background-color 0.3s, color 0.3s;
    }

    header {
      background-color: var(--secondary-color);
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.3s;
      position: relative;
    }

    header:hover {
      background-color: var(--nav-color);
    }

    header h1 {
      margin: 0;
      font-size: 36px;
      letter-spacing: 2px;
    }

    /* Przycisk zmiany motywu */
    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: var(--accent-color);
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }

    /* Wyszukiwarka */
    .search-container {
      max-width: 800px;
      margin: 0 auto 30px;
      position: relative;
    }

    .search-input {
      width: 100%;
      padding: 12px 20px;
      border: none;
      border-radius: 25px;
      background: var(--card-color);
      color: var(--text-color);
      font-size: 16px;
      box-shadow: 0 4px 6px var(--shadow);
    }

    .search-input::placeholder {
      color: var(--text-color);
      opacity: 0.7;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 40px;
      background-color: var(--nav-color);
      padding: 15px 0;
      flex-wrap: wrap;
    }

    nav a {
      color: var(--text-color);
      text-decoration: none;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      padding: 5px 15px;
      border-radius: 5px;
      transition: background-color 0.3s;
    }

    nav a:hover {
      background-color: var(--secondary-color);
    }

    .section {
      display: none;
      padding: 40px 20px;
      max-width: 1200px;
      margin: auto;
    }

    .section.active {
      display: block;
    }

    h2 {
      border-bottom: 2px solid var(--text-color);
      padding-bottom: 10px;
      margin-bottom: 30px;
    }

    .columns {
      display: flex;
      gap: 40px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .column {
      flex: 1;
      min-width: 300px;
    }

    .movie-grid, .series-grid, .game-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      gap: 25px;
      margin-top: 20px;
    }

    .movie-card, .series-card, .game-card {
      background-color: var(--card-color);
      border-radius: 10px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
    }

    .movie-card:hover, .series-card:hover, .game-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px var(--shadow);
    }

    /* NOWE: ≈örednia ocena w lewym g√≥rnym rogu zdjƒôcia */
    .card-rating-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.8);
      color: #ffd700;
      padding: 5px 10px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 5px;
      z-index: 10;
    }

    .movie-img, .series-img, .game-img {
      width: 100%;
      height: 250px;
      object-fit: cover;
    }

    .movie-info, .series-info, .game-info {
      padding: 15px;
    }

    .movie-title, .series-title, .game-title {
      font-size: 18px;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .movie-desc, .series-desc, .game-desc {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 10px;
    }

    /* System ocen na karcie */
    .card-rating {
      display: flex;
      align-items: center;
      gap: 5px;
      font-size: 14px;
      margin-top: 10px;
    }

    .rating-stars {
      color: var(--accent-color);
    }

    .rating-count {
      opacity: 0.7;
      font-size: 12px;
    }

    .game-list {
      list-style-type: none;
      padding: 0;
    }

    .game-list li {
      background-color: var(--card-color);
      margin: 15px 0;
      padding: 15px;
      border-radius: 10px;
      font-size: 18px;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .game-list li:hover {
      transform: translateX(10px);
    }

    .game-icon {
      font-size: 30px;
      margin-right: 15px;
    }

    .game-name {
      flex-grow: 1;
    }

    footer {
      text-align: center;
      padding: 20px;
      font-size: 14px;
      opacity: 0.8;
    }
    
    .welcome-message {
      text-align: center;
      padding: 60px 20px;
      font-size: 20px;
      color: var(--text-color);
      opacity: 0.8;
    }

    .back-link {
      display: inline-block;
      margin-top: 20px;
      color: var(--accent-color);
      text-decoration: none;
      font-weight: bold;
    }

    .back-link:hover {
      text-decoration: underline;
    }

    /* Styl dla przycisk√≥w */
    .filmweb-button, .trailer-button {
      background: var(--accent-color);
      color: var(--text-color);
      border: none;
      padding: 12px 24px;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      margin: 10px 10px 0 0;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      transition: opacity 0.3s;
    }
    
    .filmweb-button:hover, .trailer-button:hover {
      opacity: 0.9;
    }

    /* System ocen w szczeg√≥≈Çach */
    .details-rating {
      margin: 20px 0;
      padding: 15px;
      background: var(--card-color);
      border-radius: 10px;
    }

    .rating-container {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 10px;
    }

    .user-rating {
      display: flex;
      gap: 5px;
      cursor: pointer;
    }

    .star {
      font-size: 24px;
      color: #ccc;
      transition: color 0.2s;
    }

    .star.active {
      color: var(--accent-color);
    }

    /* Formularz oceny z nickiem */
    .rating-form {
      margin-top: 15px;
      padding: 15px;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 8px;
    }

    .nickname-input {
      width: 200px;
      padding: 8px 12px;
      border: 1px solid var(--accent-color);
      border-radius: 4px;
      background: var(--primary-color);
      color: var(--text-color);
      margin-right: 10px;
    }

    .submit-rating {
      background: var(--accent-color);
      color: var(--text-color);
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }

    /* Lista ocen u≈ºytkownik√≥w */
    .ratings-list {
      margin-top: 20px;
      max-height: 200px;
      overflow-y: auto;
    }

    .rating-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 12px;
      margin: 5px 0;
      background: rgba(0, 0, 0, 0.1);
      border-radius: 5px;
    }

    .rating-item-user {
      font-weight: bold;
      color: var(--accent-color);
    }

    .rating-item-stars {
      color: var(--accent-color);
    }

    .rating-item-time {
      font-size: 12px;
      opacity: 0.7;
    }

    /* Mobile styles */
    @media (max-width: 768px) {
      header h1 {
        font-size: 28px;
        padding-right: 50px;
      }
      
      .theme-toggle {
        top: 15px;
        right: 15px;
        width: 35px;
        height: 35px;
      }
      
      nav {
        gap: 15px;
        padding: 10px;
      }
      
      nav a {
        font-size: 16px;
        padding: 8px 12px;
      }
      
      .movie-grid, .series-grid, .game-grid {
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
      }
      
      .movie-img, .series-img, .game-img {
        height: 180px;
      }
      
      .section {
        padding: 20px 15px;
      }
      
      .columns {
        gap: 20px;
      }
      
      .column {
        min-width: 100%;
      }
      
      .nickname-input {
        width: 100%;
        margin-bottom: 10px;
        margin-right: 0;
      }
    }

    @media (max-width: 480px) {
      header h1 {
        font-size: 24px;
      }
      
      .movie-grid, .series-grid, .game-grid {
        grid-template-columns: 1fr;
      }
      
      .filmweb-button, .trailer-button {
        display: block;
        width: 100%;
        margin: 10px 0;
        text-align: center;
      }
      
      .rating-container {
        flex-wrap: wrap;
      }
    }
  </style>
</head>

<body data-theme="dark">

<header onclick="showSection('welcome')">
  <h1>Jan Nowacki - Strona osobista</h1>
  <button class="theme-toggle" onclick="toggleTheme(event)">üåô</button>
</header>

<nav>
  <a href="#" onclick="showSection('filmy')">üé¨ Filmy</a>
  <a href="#" onclick="showSection('gry')">üéÆ Gry</a>
  <a href="#" onclick="showSection('studia')">üìö Studia</a>
</nav>

<div id="welcome" class="section active">
  <div class="welcome-message">
    <h2>üëã Witaj na mojej stronie!</h2>
    <p>Nazywam siƒô Jan Nowacki i to jest moja osobista strona internetowa.</p>
    <p>Kliknij w jednƒÖ z zak≈Çadek powy≈ºej, aby zobaczyƒá moje ulubione filmy, gry i wiƒôcej!</p>
    <p><small>‚ú® Nowo≈õƒá: Mo≈ºesz oceniaƒá filmy i gry! Wystarczy podaƒá nick i daƒá gwiazdki.</small></p>
  </div>
</div>

<div id="filmy" class="section">
  <h2>Filmy i seriale</h2>
  
  <div class="search-container">
    <input type="text" class="search-input" id="movieSearch" placeholder="üîç Wyszukaj film lub serial..." onkeyup="searchMovies()">
  </div>

  <div class="columns">
    <div class="column">
      <h3>üé¨ Moje ulubione filmy</h3>
      <div class="movie-grid" id="movies-grid">
        <!-- Karty film√≥w bƒôdƒÖ generowane przez JavaScript -->
      </div>
    </div>

    <div class="column">
      <h3>üì∫ Moje ulubione seriale</h3>
      <div class="series-grid" id="series-grid">
        <!-- Karty seriali bƒôdƒÖ generowane przez JavaScript -->
      </div>
    </div>
  </div>
</div>

<!-- Sekcja szczeg√≥≈Ç√≥w filmu -->
<div id="movie-details" class="section" style="display: none;">
  <a href="#" class="back-link" onclick="showSection('filmy')">‚Üê Wr√≥ƒá do listy film√≥w</a>
  <div id="details-content"></div>
</div>

<!-- Sekcja szczeg√≥≈Ç√≥w serialu -->
<div id="series-details" class="section" style="display: none;">
  <a href="#" class="back-link" onclick="showSection('filmy')">‚Üê Wr√≥ƒá do listy seriali</a>
  <div id="series-content"></div>
</div>

<div id="gry" class="section">
  <h2>Moje ulubione gry</h2>
  
  <div class="search-container">
    <input type="text" class="search-input" id="gameSearch" placeholder="üîç Wyszukaj grƒô..." onkeyup="searchGames()">
  </div>

  <div class="game-grid" id="games-grid">
    <!-- Karty gier bƒôdƒÖ generowane przez JavaScript -->
  </div>
</div>

<!-- Sekcja szczeg√≥≈Ç√≥w gry -->
<div id="game-details" class="section" style="display: none;">
  <a href="#" class="back-link" onclick="showSection('gry')">‚Üê Wr√≥ƒá do listy gier</a>
  <div id="game-content"></div>
</div>

<div id="studia" class="section">
  <h2>Studia</h2>
  <p>Tu wkr√≥tce pojawiƒÖ siƒô informacje o mojej edukacji i studiach.</p>
  <p>... sekcja w budowie :)</p>
</div>

<footer>
  ¬© 2026 Jan Nowacki - Moja osobista strona internetowa
</footer>

<script>
  // ========== DANE ==========
  const moviesData = [
    {
      id: 'dobry-zly-brzydki',
      title: 'ü§† Dobry, z≈Çy i brzydki',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS0hThvye8txVEob0uSLdvO2UOWcvNW-iKOSg&s',
      desc: 'Klasyczny spaghetti western',
      type: 'film',
      year: '1966',
      director: 'Sergio Leone',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=WCN5JJY_wiA'
    },
    {
      id: '12-gniewnych',
      title: '‚öñÔ∏è Dwunastu gniewnych ludzi',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTToJ5elfoyvyhPJN-9aVj_Y7EssFG3Mp2O3A&s',
      desc: 'Dramat sƒÖdowy',
      type: 'film',
      year: '1957',
      director: 'Sidney Lumet',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=_13J_9B5jEk'
    },
    {
      id: 'taxi-driver',
      title: 'üöï Taxi Driver',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRHE1r1K79e6WHRmpKe3ViUl0Vwlb4ac_uyMg&s',
      desc: 'Dramat psychologiczny',
      type: 'film',
      year: '1976',
      director: 'Martin Scorsese',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=UUxD4-dEzn0'
    },
    {
      id: 'lsnienie',
      title: 'üî™ L≈õnienie',
      image: 'https://img.goodfon.com/original/1920x1080/0/24/dzhek-nikolson-jack-nicholson.jpg',
      desc: 'Horror psychologiczny',
      type: 'film',
      year: '1980',
      director: 'Stanley Kubrick',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=S014oGZiSdI'
    },
    {
      id: 'lot-nad-kukulczym-gniazdem',
      title: 'üè• Lot nad kuku≈Çczym gniazdem',
      image: 'https://upload.wikimedia.org/wikipedia/id/f/f6/One_flew_over_the_cuckoo%27s_nest_poster.jpeg',
      desc: 'Dramat psychiatryczny',
      type: 'film',
      year: '1975',
      director: 'Milo≈° Forman',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=OXrcDonY-B8'
    },
    {
      id: 'piraci-karaiby',
      title: 'üè¥‚Äç‚ò†Ô∏è Piraci z Karaib√≥w',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSs8SMTnEZ2TQdoSIrW14559B2HIRvucIKacw&s',
      desc: 'Przygodowy film akcji',
      type: 'film',
      year: '2003',
      director: 'Gore Verbinski',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=naQr0uTrH_s'
    }
  ];

  const seriesData = [
    {
      id: 'breaking-bad',
      title: 'üß™ Breaking Bad',
      image: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRd8UKB61gmfCnm2dxSshVYPbpePGGdMfXBYQ&s',
      desc: 'Dramat kryminalny',
      type: 'serial',
      seasons: '5 sezon√≥w',
      years: '2008-2013',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=HhesaQXLuRY'
    },
    {
      id: 'stranger-things',
      title: 'üëæ Stranger Things',
      image: 'https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/i/d96bb958-4e6c-4ce0-9447-fbe226fbbecf/df9nfag-55688aea-a979-4ba3-9473-38810d2f17e5.jpg',
      desc: 'Horror science fiction',
      type: 'serial',
      seasons: '4 sezony',
      years: '2016-obecnie',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=b9EkMc79ZSU'
    }
  ];

  const gamesData = [
    {
      id: 'lol',
      title: '‚öîÔ∏è League of Legends',
      image: 'https://upload.wikimedia.org/wikipedia/commons/d/d8/League_of_Legends_2019_vector.svg',
      desc: 'MOBA (Multiplayer Online Battle Arena)',
      type: 'gra',
      genre: 'MOBA, Strategia',
      year: '2009',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=BGtROJeMPeE'
    },
    {
      id: 'gta',
      title: 'üöó GTA V',
      image: 'https://upload.wikimedia.org/wikipedia/en/a/a5/Grand_Theft_Auto_V.png',
      desc: 'Gra akcji z otwartym ≈õwiatem',
      type: 'gra',
      genre: 'Akcja, Przygodowa',
      year: '2013',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=QkkoHAzjnUs'
    },
    {
      id: 'fortnite',
      title: 'üè∞ Fortnite',
      image: 'https://upload.wikimedia.org/wikipedia/commons/7/7c/Fortnite_F_lettermark_logo.png',
      desc: 'Battle royale i gra survivalowa',
      type: 'gra',
      genre: 'Battle Royale, Survival',
      year: '2017',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=2gUtfBmw86Y'
    },
    {
      id: 'rdr2',
      title: 'ü§† Red Dead Redemption 2',
      image: 'https://upload.wikimedia.org/wikipedia/en/4/44/Red_Dead_Redemption_II.jpg',
      desc: 'Gra akcji z otwartym ≈õwiatem',
      type: 'gra',
      genre: 'Akcja, Przygodowa',
      year: '2018',
      ratings: [],
      trailer: 'https://www.youtube.com/watch?v=eaW0tYpxyp0'
    }
  ];

  // ========== FUNKCJE G≈Å√ìWNE ==========
  let currentSection = 'welcome';
  
  function showSection(id) {
    const sections = document.querySelectorAll('.section');
    sections.forEach(section => {
      section.style.display = 'none';
      section.classList.remove('active');
    });
    document.getElementById(id).style.display = 'block';
    document.getElementById(id).classList.add('active');
    currentSection = id;
    
    // Za≈Çaduj dane gdy sekcja jest aktywna
    if (id === 'filmy') {
      loadMovies();
      loadSeries();
    } else if (id === 'gry') {
      loadGames();
    }
  }

  // ========== MOTYW ==========
  function toggleTheme(event) {
    event.stopPropagation(); // Zatrzymuje propagacjƒô do header
    const currentTheme = document.body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    document.body.setAttribute('data-theme', newTheme);
    
    const button = document.querySelector('.theme-toggle');
    button.textContent = newTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    
    // Zapisz w LocalStorage
    localStorage.setItem('theme', newTheme);
    
    // NIE zmieniamy sekcji - zostajemy gdzie jeste≈õmy
    // Ale musimy prze≈Çadowaƒá dane, bo zmieni≈Ç siƒô CSS
    if (currentSection === 'filmy') {
      loadMovies();
      loadSeries();
    } else if (currentSection === 'gry') {
      loadGames();
    } else if (currentSection.startsWith('movie-details')) {
      const id = currentSection.replace('movie-details-', '');
      showMovieDetails(id);
    } else if (currentSection.startsWith('series-details')) {
      const id = currentSection.replace('series-details-', '');
      showSeriesDetails(id);
    } else if (currentSection.startsWith('game-details')) {
      const id = currentSection.replace('game-details-', '');
      showGameDetails(id);
    }
  }

  // ========== WYSZUKIWARKA ==========
  function searchMovies() {
    const searchTerm = document.getElementById('movieSearch').value.toLowerCase();
    const allItems = [...moviesData, ...seriesData];
    
    const movieCards = document.querySelectorAll('.movie-card, .series-card');
    movieCards.forEach(card => {
      const title = card.querySelector('.movie-title, .series-title').textContent.toLowerCase();
      const desc = card.querySelector('.movie-desc, .series-desc').textContent.toLowerCase();
      
      if (title.includes(searchTerm) || desc.includes(searchTerm)) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  }

  function searchGames() {
    const searchTerm = document.getElementById('gameSearch').value.toLowerCase();
    const gameCards = document.querySelectorAll('.game-card');
    
    gameCards.forEach(card => {
      const title = card.querySelector('.game-title').textContent.toLowerCase();
      const desc = card.querySelector('.game-desc').textContent.toLowerCase();
      
      if (title.includes(searchTerm) || desc.includes(searchTerm)) {
        card.style.display = 'block';
      } else {
        card.style.display = 'none';
      }
    });
  }

  // ========== SYSTEM OCEN ==========
  function loadRatings() {
    // ≈Åaduj oceny z LocalStorage dla ka≈ºdego elementu
    [...moviesData, ...seriesData, ...gamesData].forEach(item => {
      const saved = localStorage.getItem(`ratings_${item.id}`);
      if (saved) {
        item.ratings = JSON.parse(saved);
      }
    });
  }

  function calculateAverageRating(ratings) {
    if (ratings.length === 0) return 0;
    const sum = ratings.reduce((total, r) => total + r.rating, 0);
    return sum / ratings.length;
  }

  function getStarsHTML(rating) {
    let stars = '';
    const roundedRating = Math.round(rating);
    for (let i = 1; i <= 5; i++) {
      if (i <= roundedRating) {
        stars += '‚òÖ';
      } else {
        stars += '‚òÜ';
      }
    }
    return stars;
  }

  // ========== ≈ÅADOWANIE DANYCH ==========
  function loadMovies() {
    const grid = document.getElementById('movies-grid');
    grid.innerHTML = '';
    
    moviesData.forEach(movie => {
      const avgRating = calculateAverageRating(movie.ratings);
      const ratingCount = movie.ratings.length;
      
      grid.innerHTML += `
        <div class="movie-card" onclick="showMovieDetails('${movie.id}')" data-id="${movie.id}">
          ${ratingCount > 0 ? `<div class="card-rating-badge">‚≠ê ${avgRating.toFixed(1)}</div>` : ''}
          <img src="${movie.image}" alt="${movie.title}" class="movie-img">
          <div class="movie-info">
            <div class="movie-title">${movie.title}</div>
            <div class="movie-desc">${movie.desc} (${movie.year})</div>
            <div class="card-rating">
              <div class="rating-stars">${getStarsHTML(avgRating)}</div>
              <div class="rating-count">(${ratingCount} g≈Ços√≥w)</div>
            </div>
          </div>
        </div>
      `;
    });
  }

  function loadSeries() {
    const grid = document.getElementById('series-grid');
    grid.innerHTML = '';
    
    seriesData.forEach(series => {
      const avgRating = calculateAverageRating(series.ratings);
      const ratingCount = series.ratings.length;
      
      grid.innerHTML += `
        <div class="series-card" onclick="showSeriesDetails('${series.id}')" data-id="${series.id}">
          ${ratingCount > 0 ? `<div class="card-rating-badge">‚≠ê ${avgRating.toFixed(1)}</div>` : ''}
          <img src="${series.image}" alt="${series.title}" class="series-img">
          <div class="series-info">
            <div class="series-title">${series.title}</div>
            <div class="series-desc">${series.desc}</div>
            <div class="card-rating">
              <div class="rating-stars">${getStarsHTML(avgRating)}</div>
              <div class="rating-count">(${ratingCount} g≈Ços√≥w)</div>
            </div>
          </div>
        </div>
      `;
    });
  }

  function loadGames() {
    const grid = document.getElementById('games-grid');
    grid.innerHTML = '';
    
    gamesData.forEach(game => {
      const avgRating = calculateAverageRating(game.ratings);
      const ratingCount = game.ratings.length;
      
      grid.innerHTML += `
        <div class="game-card" onclick="showGameDetails('${game.id}')" data-id="${game.id}">
          ${ratingCount > 0 ? `<div class="card-rating-badge">‚≠ê ${avgRating.toFixed(1)}</div>` : ''}
          <img src="${game.image}" alt="${game.title}" class="game-img" style="${game.id === 'lol' || game.id === 'fortnite' ? 'background: white; padding: 20px;' : ''}">
          <div class="game-info">
            <div class="game-title">${game.title}</div>
            <div class="game-desc">${game.desc} (${game.year})</div>
            <div class="card-rating">
              <div class="rating-stars">${getStarsHTML(avgRating)}</div>
              <div class="rating-count">(${ratingCount} g≈Ços√≥w)</div>
            </div>
          </div>
        </div>
      `;
    });
  }

  // ========== SZCZEG√ì≈ÅY Z NOWYM SYSTEMEM OCEN ==========
  let currentSelectedRating = 0;
  let currentRatingItemId = '';
  let currentRatingType = '';

  function showMovieDetails(id) {
    const movie = moviesData.find(m => m.id === id);
    if (!movie) return;
    
    currentRatingItemId = id;
    currentRatingType = 'film';
    currentSection = `movie-details-${id}`;
    
    const avgRating = calculateAverageRating(movie.ratings);
    
    document.getElementById('details-content').innerHTML = `
      <div style="display: flex; flex-wrap: wrap; gap: 30px;">
        <img src="${movie.image}" alt="${movie.title}" style="width: 100%; max-width: 300px; height: 450px; object-fit: cover; border-radius: 10px;">
        <div style="flex: 1; min-width: 300px;">
          <h2 style="margin-top: 0;">${movie.title}</h2>
          <p style="font-size: 18px;">${movie.desc}</p>
          <p><strong>Rok produkcji:</strong> ${movie.year}</p>
          <p><strong>Re≈ºyser:</strong> ${movie.director}</p>
          
          <div class="details-rating">
            <h3>Oce≈Ñ ten film:</h3>
            <div class="rating-container">
              <div class="user-rating" id="rating-stars-${movie.id}">
                ${[1,2,3,4,5].map(star => `
                  <span class="star" data-value="${star}" 
                        onclick="selectRating(${star}, '${movie.id}', 'film')"
                        onmouseover="highlightStars(${star}, '${movie.id}')"
                        onmouseout="resetStars('${movie.id}')">‚òÖ</span>
                `).join('')}
              </div>
              <div>≈örednia: <strong>${avgRating.toFixed(1)}/5</strong> (${movie.ratings.length} g≈Ços√≥w)</div>
            </div>
            
            <div class="rating-form">
              <input type="text" id="nickname-${movie.id}" class="nickname-input" placeholder="Tw√≥j nick" maxlength="20">
              <button class="submit-rating" onclick="submitRating('${movie.id}', 'film')">Dodaj ocenƒô</button>
              <p><small>Musisz podaƒá nick i wybraƒá ocenƒô (1-5 gwiazdek).</small></p>
            </div>
            
            ${movie.ratings.length > 0 ? `
            <div class="ratings-list">
              <h4>Oceny u≈ºytkownik√≥w:</h4>
              ${movie.ratings.map(rating => `
                <div class="rating-item">
                  <span class="rating-item-user">${rating.nickname}</span>
                  <span class="rating-item-stars">${getStarsHTML(rating.rating)}</span>
                  <span class="rating-item-time">${new Date(rating.timestamp).toLocaleString('pl-PL')}</span>
                </div>
              `).reverse().join('')}
            </div>
            ` : ''}
          </div>
          
          <div>
            <a href="${movie.trailer}" target="_blank" class="trailer-button">
              üé¨ Obejrzyj zwiastun
            </a>
            <a href="https://www.filmweb.pl/user/JasieKnow" target="_blank" class="filmweb-button">
              üìñ M√≥j profil Filmweb
            </a>
          </div>
        </div>
      </div>
    `;
    
    showSection('movie-details');
  }

  function showSeriesDetails(id) {
    const serie = seriesData.find(s => s.id === id);
    if (!serie) return;
    
    currentRatingItemId = id;
    currentRatingType = 'serial';
    currentSection = `series-details-${id}`;
    
    const avgRating = calculateAverageRating(serie.ratings);
    
    document.getElementById('series-content').innerHTML = `
      <div style="display: flex; flex-wrap: wrap; gap: 30px;">
        <img src="${serie.image}" alt="${serie.title}" style="width: 100%; max-width: 300px; height: 450px; object-fit: cover; border-radius: 10px;">
        <div style="flex: 1; min-width: 300px;">
          <h2 style="margin-top: 0;">${serie.title}</h2>
          <p style="font-size: 18px;">${serie.desc}</p>
          <p><strong>Liczba sezon√≥w:</strong> ${serie.seasons}</p>
          <p><strong>Lata emisji:</strong> ${serie.years}</p>
          
          <div class="details-rating">
            <h3>Oce≈Ñ ten serial:</h3>
            <div class="rating-container">
              <div class="user-rating" id="rating-stars-${serie.id}">
                ${[1,2,3,4,5].map(star => `
                  <span class="star" data-value="${star}" 
                        onclick="selectRating(${star}, '${serie.id}', 'serial')"
                        onmouseover="highlightStars(${star}, '${serie.id}')"
                        onmouseout="resetStars('${serie.id}')">‚òÖ</span>
                `).join('')}
              </div>
              <div>≈örednia: <strong>${avgRating.toFixed(1)}/5</strong> (${serie.ratings.length} g≈Ços√≥w)</div>
            </div>
            
            <div class="rating-form">
              <input type="text" id="nickname-${serie.id}" class="nickname-input" placeholder="Tw√≥j nick" maxlength="20">
              <button class="submit-rating" onclick="submitRating('${serie.id}', 'serial')">Dodaj ocenƒô</button>
              <p><small>Musisz podaƒá nick i wybraƒá ocenƒô (1-5 gwiazdek).</small></p>
            </div>
            
            ${serie.ratings.length > 0 ? `
            <div class="ratings-list">
              <h4>Oceny u≈ºytkownik√≥w:</h4>
              ${serie.ratings.map(rating => `
                <div class="rating-item">
                  <span class="rating-item-user">${rating.nickname}</span>
                  <span class="rating-item-stars">${getStarsHTML(rating.rating)}</span>
                  <span class="rating-item-time">${new Date(rating.timestamp).toLocaleString('pl-PL')}</span>
                </div>
              `).reverse().join('')}
            </div>
            ` : ''}
          </div>
          
          <div>
            <a href="${serie.trailer}" target="_blank" class="trailer-button">
              üì∫ Obejrzyj zwiastun
            </a>
            <a href="https://www.filmweb.pl/user/JasieKnow" target="_blank" class="filmweb-button">
              üìñ M√≥j profil Filmweb
            </a>
          </div>
        </div>
      </div>
    `;
    
    showSection('series-details');
  }

  function showGameDetails(id) {
    const game = gamesData.find(g => g.id === id);
    if (!game) return;
    
    currentRatingItemId = id;
    currentRatingType = 'gra';
    currentSection = `game-details-${id}`;
    
    const avgRating = calculateAverageRating(game.ratings);
    
    document.getElementById('game-content').innerHTML = `
      <div style="display: flex; flex-wrap: wrap; gap: 30px;">
        <img src="${game.image}" alt="${game.title}" style="width: 100%; max-width: 300px; height: 300px; object-fit: contain; background: white; padding: 20px; border-radius: 10px;">
        <div style="flex: 1; min-width: 300px;">
          <h2 style="margin-top: 0;">${game.title}</h2>
          <p style="font-size: 18px;">${game.desc}</p>
          <p><strong>Gatunek:</strong> ${game.genre}</p>
          <p><strong>Rok wydania:</strong> ${game.year}</p>
          
          <div class="details-rating">
            <h3>Oce≈Ñ tƒô grƒô:</h3>
            <div class="rating-container">
              <div class="user-rating" id="rating-stars-${game.id}">
                ${[1,2,3,4,5].map(star => `
                  <span class="star" data-value="${star}" 
                        onclick="selectRating(${star}, '${game.id}', 'gra')"
                        onmouseover="highlightStars(${star}, '${game.id}')"
                        onmouseout="resetStars('${game.id}')">‚òÖ</span>
                `).join('')}
              </div>
              <div>≈örednia: <strong>${avgRating.toFixed(1)}/5</strong> (${game.ratings.length} g≈Ços√≥w)</div>
            </div>
            
            <div class="rating-form">
              <input type="text" id="nickname-${game.id}" class="nickname-input" placeholder="Tw√≥j nick" maxlength="20">
              <button class="submit-rating" onclick="submitRating('${game.id}', 'gra')">Dodaj ocenƒô</button>
              <p><small>Musisz podaƒá nick i wybraƒá ocenƒô (1-5 gwiazdek).</small></p>
            </div>
            
            ${game.ratings.length > 0 ? `
            <div class="ratings-list">
              <h4>Oceny u≈ºytkownik√≥w:</h4>
              ${game.ratings.map(rating => `
                <div class="rating-item">
                  <span class="rating-item-user">${rating.nickname}</span>
                  <span class="rating-item-stars">${getStarsHTML(rating.rating)}</span>
                  <span class="rating-item-time">${new Date(rating.timestamp).toLocaleString('pl-PL')}</span>
                </div>
              `).reverse().join('')}
            </div>
            ` : ''}
          </div>
          
          <div>
            <a href="${game.trailer}" target="_blank" class="trailer-button">
              üéÆ Obejrzyj zwiastun
            </a>
            <a href="https://www.filmweb.pl/user/JasieKnow" target="_blank" class="filmweb-button">
              üìñ M√≥j profil Filmweb
            </a>
          </div>
        </div>
      </div>
    `;
    
    showSection('game-details');
  }

  // ========== FUNKCJE NOWEGO SYSTEMU OCEN ==========
  function selectRating(rating, id, type) {
    currentSelectedRating = rating;
    currentRatingItemId = id;
    currentRatingType = type;
    
    // Pod≈õwietl gwiazdki
    const stars = document.querySelectorAll(`#rating-stars-${id} .star`);
    stars.forEach((star, index) => {
      if (index < rating) {
        star.classList.add('active');
      } else {
        star.classList.remove('active');
      }
    });
  }

  function highlightStars(count, id) {
    const stars = document.querySelectorAll(`#rating-stars-${id} .star`);
    stars.forEach((star, index) => {
      if (index < count) {
        star.classList.add('active');
      }
    });
  }

  function resetStars(id) {
    const stars = document.querySelectorAll(`#rating-stars-${id} .star`);
    stars.forEach((star, index) => {
      if (index < currentSelectedRating) {
        star.classList.add('active');
      } else {
        star.classList.remove('active');
      }
    });
  }

  function submitRating(id, type) {
    const nicknameInput = document.getElementById(`nickname-${id}`);
    const nickname = nicknameInput.value.trim();
    
    if (!nickname) {
      alert('Proszƒô podaƒá nick!');
      nicknameInput.focus();
      return;
    }
    
    if (currentSelectedRating === 0) {
      alert('Proszƒô wybraƒá ocenƒô (kliknij w gwiazdki)!');
      return;
    }
    
    let item;
    if (type === 'film') item = moviesData.find(m => m.id === id);
    else if (type === 'serial') item = seriesData.find(s => s.id === id);
    else item = gamesData.find(g => g.id === id);
    
    if (!item) return;
    
    // Sprawd≈∫ czy u≈ºytkownik ju≈º ocenia≈Ç (po nicku)
    const existingIndex = item.ratings.findIndex(r => r.nickname === nickname);
    
    if (existingIndex !== -1) {
      // Aktualizuj istniejƒÖcƒÖ ocenƒô
      item.ratings[existingIndex].rating = currentSelectedRating;
      item.ratings[existingIndex].timestamp = new Date().toISOString();
    } else {
      // Dodaj nowƒÖ ocenƒô
      item.ratings.push({
        nickname: nickname,
        rating: currentSelectedRating,
        timestamp: new Date().toISOString()
      });
    }
    
    // Zapisz w LocalStorage
    localStorage.setItem(`ratings_${id}`, JSON.stringify(item.ratings));
    
    // Od≈õwie≈º wy≈õwietlanie
    if (type === 'film') {
      showMovieDetails(id);
      loadMovies(); // Od≈õwie≈º karty film√≥w
    } else if (type === 'serial') {
      showSeriesDetails(id);
      loadSeries(); // Od≈õwie≈º karty seriali
    } else {
      showGameDetails(id);
      loadGames(); // Od≈õwie≈º karty gier
    }
    
    // Resetuj formularz
    currentSelectedRating = 0;
    nicknameInput.value = '';
  }

  // ========== INICJALIZACJA ==========
  document.addEventListener('DOMContentLoaded', function() {
    // Za≈Çaduj zapisany motyw
    const savedTheme = localStorage.getItem('theme') || 'dark';
    document.body.setAttribute('data-theme', savedTheme);
    document.querySelector('.theme-toggle').textContent = savedTheme === 'dark' ? 'üåô' : '‚òÄÔ∏è';
    
    // Za≈Çaduj oceny
    loadRatings();
    
    // Pokazuj stronƒô startowƒÖ
    showSection('welcome');
  });
</script>

</body>
</html>
